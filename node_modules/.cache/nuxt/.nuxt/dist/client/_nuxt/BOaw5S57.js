import{d as K,k as A,y as d,z as l,F as N,G as m,H as E,A as t,B as y,I as lt,r as $,J as D,K as Pe,o as re,L as he,C as z,M as Q,N as U,O as pe,P as Ce,Q as it,E as me,R as rt,S as ne,T as ct,U as ut}from"./BoYpWz2i.js";import{_ as ce}from"./DlAUqK2U.js";const dt=["disabled"],pt={key:0,class:"base-button__loading"},mt={key:1,class:"material-icons"},ht={key:2},_t=K({__name:"BaseButton",props:{text:{default:"Botão"},icon:{default:""},variant:{default:"primary"},size:{default:"medium"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!0},fullWidth:{type:Boolean,default:!1}},emits:["click"],setup(h,{emit:u}){const g=h,b=u,B=A(()=>["base-button",`base-button--${g.variant}`,`base-button--${g.size}`,{"base-button--loading":g.loading,"base-button--disabled":g.disabled,"base-button--full-width":g.fullWidth}]),o=p=>{!g.disabled&&!g.loading&&b("click",p)};return(p,_)=>(l(),d("button",{class:N(m(B)),disabled:p.disabled||p.loading,onClick:o,type:"button"},[p.loading?(l(),d("div",pt,_[0]||(_[0]=[t("div",{class:"spinner"},null,-1)]))):(l(),d("i",mt,y(p.icon),1)),p.showText?(l(),d("span",ht,y(p.text),1)):E("",!0)],10,dt))}}),_e=Object.assign(ce(_t,[["__scopeId","data-v-dff6e078"]]),{__name:"BaseButton"}),vt=()=>{const h=o=>o===0?"Grátis":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o/100),u=o=>o===0?"":new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o/100),g=o=>{const _=o.replace(/[^\d,]/g,"").replace(",","."),a=parseFloat(_||"0");return Math.round(a*100)},b=o=>{const p=o.replace(/\D/g,"");if(p.length===0)return"";const _=parseInt(p);return new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(_/100)};return{formatPrice:h,formatPriceInput:u,extractPriceValue:g,applyPriceMask:b,handlePriceInput:(o,p,_=0)=>{const a=o.target,k=a.value;if(!k.trim()){p(_),a.value="";return}const f=b(k);a.value=f;const r=g(f);p(r)}}},gt={class:"price-input"},ft={key:0,class:"price-input__label"},yt=["value","placeholder","disabled"],bt=K({__name:"PriceInput",props:{modelValue:{},label:{default:""},placeholder:{default:"R$ 0,00"},inputClass:{default:""},disabled:{type:Boolean,default:!1},min:{default:0},max:{default:1e6}},emits:["update:modelValue"],setup(h,{emit:u}){const g=h,b=u,{formatPriceInput:B,handlePriceInput:o}=vt(),p=A(()=>B(g.modelValue)),_=a=>{o(a,k=>{const f=Math.max(g.min,Math.min(g.max,k));b("update:modelValue",f)},g.min)};return(a,k)=>(l(),d("div",gt,[a.label?(l(),d("label",ft,y(a.label),1)):E("",!0),t("input",{type:"text",value:m(p),onInput:_,placeholder:a.placeholder,class:N(["price-input__field",a.inputClass]),disabled:a.disabled},null,42,yt)]))}}),Ie=Object.assign(ce(bt,[["__scopeId","data-v-0ec55cb9"]]),{__name:"PriceInput"}),kt="http://localhost:3001/api",ee=lt("hotels",()=>{const h=$([]),u=$([]),g=$([]),b=$(!1),B=$(null),o=$({total:0,offset:0,limit:10,hasMore:!1,currentPage:1,totalPages:0}),p=$(!1),_=$(!1),a=$({minPrice:0,maxPrice:1e6,stars:[],amenities:[],hasBreakFast:null,hasRefundableRoom:null,placeId:null,searchQuery:""}),k=$({key:"totalPrice",label:"Preço",direction:"asc"}),f=$({total:0,priceRange:{min:0,max:0},avgPrice:0,starsDistribution:{},amenitiesCount:{}}),r=$(null),i=$(!1),P=$(""),C=$([]),S=$(!1),R=$(null),j=$(new Map),G=$(null),te=A(()=>{let e=[...h.value];if(a.value.searchQuery.trim()){const s=a.value.searchQuery.toLowerCase();e=e.filter(v=>v.name.toLowerCase().includes(s)||v.district.toLowerCase().includes(s)||oe(v.placeId).toLowerCase().includes(s))}return e=e.filter(s=>s.totalPrice>=a.value.minPrice&&s.totalPrice<=a.value.maxPrice),a.value.stars.length>0&&(e=e.filter(s=>a.value.stars.includes(s.stars))),a.value.amenities.length>0&&(e=e.filter(s=>a.value.amenities.every(v=>s.amenities.includes(v)))),a.value.hasBreakFast!==null&&(e=e.filter(s=>s.hasBreakFast===a.value.hasBreakFast)),a.value.hasRefundableRoom!==null&&(e=e.filter(s=>s.hasRefundableRoom===a.value.hasRefundableRoom)),a.value.placeId!==null&&(e=e.filter(s=>s.placeId===a.value.placeId)),e.sort((s,v)=>{const{key:F,direction:H}=k.value;return F==="totalPrice"?H==="asc"?s.totalPrice-v.totalPrice:v.totalPrice-s.totalPrice:F==="stars"?H==="asc"?parseInt(s.stars)-parseInt(v.stars):parseInt(v.stars)-parseInt(s.stars):F==="name"?H==="asc"?s.name.localeCompare(v.name):v.name.localeCompare(s.name):0}),e}),T=A(()=>{const e=h.value.length,s=e>0?Math.round(h.value.reduce((F,H)=>F+H.totalPrice,0)/e):0,v=e>0?{min:Math.min(...h.value.map(F=>F.totalPrice)),max:Math.max(...h.value.map(F=>F.totalPrice))}:{min:0,max:0};return{total:e,avgPrice:s,priceRange:v}}),q=A(()=>a.value.minPrice>0||a.value.maxPrice<1e6||a.value.stars.length>0||a.value.amenities.length>0||a.value.hasBreakFast!==null||a.value.hasRefundableRoom!==null||a.value.placeId!==null||a.value.searchQuery.trim()!==""),V=A(()=>{let e=0;return(a.value.minPrice>0||a.value.maxPrice<1e6)&&e++,a.value.stars.length>0&&e++,a.value.amenities.length>0&&e++,a.value.hasBreakFast!==null&&e++,a.value.hasRefundableRoom!==null&&e++,a.value.placeId!==null&&e++,a.value.searchQuery.trim()!==""&&e++,e}),I=A(()=>h.value.reduce((s,v)=>{const F=v.stars;return s[F]||(s[F]=[]),s[F].push(v),s},{})),x=A(()=>h.value.reduce((s,v)=>{const F=oe(v.placeId);return s[F]||(s[F]=[]),s[F].push(v),s},{})),Y=A(()=>{if(h.value.length===0)return{min:0,max:0,avg:0,median:0};const e=h.value.map(ae=>ae.totalPrice).sort((ae,ie)=>ae-ie),s=e[0],v=e[e.length-1],F=Math.round(e.reduce((ae,ie)=>ae+ie,0)/e.length),H=e[Math.floor(e.length/2)];return{min:s,max:v,avg:F,median:H}}),se=A(()=>C.value.map(e=>({...e,displayName:`${e.name}, ${e.state.shortname}`,fullName:`${e.name}, ${e.state.name}`}))),ve=A(()=>C.value.length>0),ge=A(()=>P.value.length>=3),J=e=>e&&typeof e=="object"&&"success"in e&&"data"in e?e.data:e,ue=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e/100),fe=e=>({WI_FI:"Wi-fi grátis",PARKING:"Estacionamento",POOL:"Piscina",RESTAURANT:"Restaurante",FITNESS_CENTER:"Academia",ROOM_SERVICE:"Serviço de quarto",STEAM_ROOM:"Sauna",PET_FRIENDLY:"Aceita pets",BAR:"Bar",SPA:"Spa",ACCESSIBILITY:"Acessibilidade",AIR_CONDITIONING:"Ar-condicionado"})[e]||e,oe=e=>{const s=u.value.find(v=>v.id===e);return s?`${s.name}, ${s.state}`:"Local não encontrado"},ye=(e,s,v,F)=>{const H=new URLSearchParams;return e.searchQuery&&H.append("q",e.searchQuery),e.minPrice>0&&H.append("minPrice",e.minPrice.toString()),e.maxPrice<1e6&&H.append("maxPrice",e.maxPrice.toString()),e.stars.length>0&&H.append("stars",e.stars.join(",")),e.amenities.length>0&&H.append("amenities",e.amenities.join(",")),e.hasBreakFast!==null&&H.append("hasBreakFast",e.hasBreakFast.toString()),e.hasRefundableRoom!==null&&H.append("hasRefundableRoom",e.hasRefundableRoom.toString()),e.placeId&&H.append("placeId",e.placeId.toString()),s.key&&H.append("sortBy",s.key),s.direction&&H.append("sortOrder",s.direction),v!==void 0&&H.append("offset",v.toString()),F!==void 0&&H.append("limit",F.toString()),H},X=async(e,s)=>{try{const v=`${kt}${e}`,F=await fetch(v,{headers:{"Content-Type":"application/json"},...s});if(!F.ok)throw new Error(`HTTP error! status: ${F.status}`);return await F.json()}catch(v){throw console.error("API request failed:",v),v}},be=async()=>{if(!(p.value||!o.value.hasMore)){p.value=!0,o.value.offset+=o.value.limit;try{await L(!1)}catch(e){o.value.offset-=o.value.limit,console.error("Error loading more hotels:",e)}finally{p.value=!1}}},ke=async e=>{if(e<1||e>o.value.totalPages)return;const s=(e-1)*o.value.limit;o.value.offset=s,o.value.currentPage=e,await L(!1)},W=()=>{o.value={total:0,offset:0,limit:10,hasMore:!1,currentPage:1,totalPages:0},h.value=[],_.value=!1},c=async e=>{o.value.limit=e,o.value.offset=0,o.value.currentPage=1,h.value=[],await L(!1)},n=async()=>{b.value=!0,B.value=null;try{const[e,s,v]=await Promise.all([X("/places"),X("/amenities"),X("/hotels/stats")]);u.value=J(e),g.value=J(s),f.value=J(v),await L()}catch(e){B.value="Erro ao carregar dados iniciais",console.error("Error fetching initial data:",e)}finally{b.value=!1}},L=async(e=!0)=>{e&&(o.value.offset=0,o.value.currentPage=1,h.value=[]),b.value=!0,B.value=null;try{const s=ye(a.value,k.value,o.value.offset,o.value.limit),v=await X(`/hotels/filtered?${s}`),F=J(v);e?h.value=F.hotels:h.value=[...h.value,...F.hotels];const H=F;H.pagination&&(o.value={...H.pagination,currentPage:Math.floor(H.pagination.offset/H.pagination.limit)+1,totalPages:Math.ceil(H.pagination.total/H.pagination.limit)}),_.value=!0}catch(s){B.value="Erro ao carregar hotéis",console.error("Error fetching filtered hotels:",s)}finally{b.value=!1}},M=async()=>{await L()},w=async()=>{try{const e=await X("/hotels/stats");f.value=J(e)}catch(e){console.error("Error fetching stats:",e)}},Z=e=>{a.value={...a.value,...e},W(),O()},le=(e,s)=>{a.value.minPrice=e,a.value.maxPrice=s,W(),O()},de=e=>{a.value.stars=e,W(),O()},Fe=e=>{a.value.amenities=e,W(),O()},Be=e=>{a.value.hasBreakFast=e,W(),O()},Le=e=>{a.value.hasRefundableRoom=e,W(),O()},Me=e=>{a.value.placeId=e,W(),O()},He=e=>{a.value.searchQuery=e,W(),O()},Ee=e=>{a.value.stars.includes(e)||(a.value.stars.push(e),O())},Ae=e=>{a.value.stars=a.value.stars.filter(s=>s!==e),O()},Te=e=>{a.value.amenities.includes(e)||(a.value.amenities.push(e),O())},Ve=e=>{a.value.amenities=a.value.amenities.filter(s=>s!==e),O()},xe=e=>{k.value=e,W(),L()},De=(e="asc")=>{k.value={key:"totalPrice",label:"Preço",direction:e},L()},Ne=(e="desc")=>{k.value={key:"stars",label:"Classificação",direction:e},L()},Oe=(e="asc")=>{k.value={key:"name",label:"Nome",direction:e},L()},Qe=()=>{a.value={minPrice:0,maxPrice:1e6,stars:[],amenities:[],hasBreakFast:null,hasRefundableRoom:null,placeId:null,searchQuery:""},W(),L()},je=()=>{a.value.minPrice=0,a.value.maxPrice=1e6,O()},Ue=()=>{a.value.stars=[],O()},We=()=>{a.value.amenities=[],O()},Ze=()=>{a.value.searchQuery="",O()};let we=null;const O=()=>{we&&clearTimeout(we),we=setTimeout(()=>{L(!0)},300)},Ke=async e=>{if(e.length<3){C.value=[];return}if(j.value.has(e)){C.value=j.value.get(e)||[];return}S.value=!0,R.value=null;try{const s=await X(`/cities?name_like=${encodeURIComponent(e)}`),v=J(s);C.value=v,j.value.set(e,v)}catch(s){R.value="Erro ao buscar cidades",console.error("Error searching cities:",s)}finally{S.value=!1}},Ge=e=>{Z({placeId:e.placeId,searchQuery:""}),P.value="",C.value=[]},ze=e=>{P.value=e,G.value&&clearTimeout(G.value),G.value=setTimeout(()=>{Ke(e)},300)},Ye=()=>{P.value="",C.value=[],R.value=null,G.value&&clearTimeout(G.value)},Je=async e=>{Z({searchQuery:e});try{const s=new URLSearchParams;e.trim()&&s.append("q",e.trim());const v=await X(`/hotels/search?${s}`);v.success&&v.data?h.value=v.data:h.value=[]}catch(s){console.error("Erro na busca:",s),Se(e)}},Se=e=>{const s=e.toLowerCase(),v=h.value.filter(F=>{const H=F.name.toLowerCase(),ae=F.district.toLowerCase(),ie=oe(F.placeId).toLowerCase();return H.includes(s)||ae.includes(s)||ie.includes(s)});h.value=v},Xe=async e=>{console.log("Store - openHotelDrawer chamado com hotel:",e),console.log("Store - hotel.id:",e.id);try{console.log("Store - buscando detalhes do hotel...");const s=await $e(e.id);console.log("Store - hotelDetails recebido:",s),console.log("Store - hotelDetails.images:",s.images),r.value=s,i.value=!0,console.log("Store - drawer aberto com sucesso"),console.log("Store - selectedHotel.value:",r.value),console.log("Store - selectedHotel.value.thumb:",r.value?.thumb),console.log("Store - isDrawerOpen.value:",i.value)}catch(s){console.error("Erro ao abrir drawer:",s),console.log("Store - usando fallback com hotel básico"),r.value=e,i.value=!0}},qe=()=>{r.value=null,i.value=!1},$e=async e=>{console.log("Store - fetchHotelById chamado com id:",e);try{const s=await X(`/hotels/${e}`);console.log("Store - response da API:",s);const v=J(s);return console.log("Store - hotel após extractData:",v),v.images||(console.log("Store - hotel não tem images, usando fallback"),v.images=[v.thumb]),console.log("Store - hotel final:",v),v}catch(s){throw console.error("Erro ao buscar hotel por ID:",s),s}},et=async e=>{try{return await $e(e)}catch(s){return console.error("Erro ao obter detalhes do hotel:",s),null}},tt=e=>h.value.find(s=>s.id===e),at=e=>h.value.filter(s=>s.placeId===e),st=e=>h.value.filter(s=>s.stars===e),ot=(e,s)=>h.value.filter(v=>v.totalPrice>=e&&v.totalPrice<=s),nt=e=>h.value.filter(s=>s.amenities.includes(e));return{hotels:h,places:D(u),amenities:D(g),loading:D(b),error:D(B),filters:a,sortBy:D(k),stats:D(f),selectedHotel:D(r),isDrawerOpen:D(i),pagination:D(o),isLoadingMore:D(p),hasInitialLoad:D(_),filteredHotels:te,filteredStats:T,hasActiveFilters:q,activeFiltersCount:V,hotelsByStars:I,hotelsByPlace:x,priceStats:Y,updateFilters:Z,updatePriceFilter:le,updateStarsFilter:de,updateAmenitiesFilter:Fe,updateBreakfastFilter:Be,updateRefundableFilter:Le,updatePlaceFilter:Me,updateSearchQuery:He,addStarFilter:Ee,removeStarFilter:Ae,addAmenityFilter:Te,removeAmenityFilter:Ve,updateSort:xe,sortByPrice:De,sortByStars:Ne,sortByName:Oe,resetFilters:Qe,resetPriceFilter:je,resetStarsFilter:Ue,resetAmenitiesFilter:We,resetSearchQuery:Ze,fetchInitialData:n,fetchHotels:M,fetchStats:w,searchHotels:Je,performLocalSearch:Se,openHotelDrawer:Xe,closeHotelDrawer:qe,fetchHotelById:$e,getHotelDetails:et,getHotelById:tt,getHotelsByPlace:at,getHotelsByStars:st,getHotelsByPriceRange:ot,getHotelsWithAmenity:nt,loadMoreHotels:be,goToPage:ke,resetPagination:W,updateItemsPerPage:c,formatPrice:ue,getAmenityLabel:fe,getPlaceName:oe,citySearchQuery:D(P),citySearchResults:D(C),citySearchLoading:D(S),citySearchError:D(R),formattedCityResults:D(se),hasCitySearchResults:D(ve),shouldShowCitySearch:D(ge),updateCitySearchQuery:ze,clearCitySearch:Ye,selectCity:Ge}}),wt={class:"filter-dropdown"},$t={class:"material-icons filter-dropdown__arrow"},Pt={key:0,class:"filter-dropdown__badge"},St={key:0,class:"filter-dropdown__content"},Ct={class:"filter-dropdown__body"},It={class:"filter-section"},Rt={class:"filter-section__price-range"},Ft={class:"filter-section"},Bt={class:"filter-section__stars"},Lt=["value"],Mt={class:"filter-section__star-label"},Ht={key:0},Et={class:"filter-section"},At={class:"filter-section__amenities"},Tt=["value"],Vt={class:"filter-section__amenity-label"},xt={class:"filter-section"},Dt={class:"filter-section__features"},Nt={class:"filter-section__feature-option"},Ot=["checked"],Qt={class:"filter-section__feature-option"},jt=["checked"],Ut=K({__name:"FilterDropdown",setup(h){const u=ee(),{filters:g,amenities:b,updatePriceFilter:B,updateStarsFilter:o,updateAmenitiesFilter:p,updateBreakfastFilter:_,updateRefundableFilter:a,resetFilters:k}=u,f=$(!1),r=$({...g});Pe(()=>g,V=>{r.value={...V}},{deep:!0});const i=A(()=>{let V=0;return(r.value.minPrice>0||r.value.maxPrice<1e6)&&V++,r.value.stars.length>0&&V++,r.value.amenities.length>0&&V++,r.value.hasBreakFast!==null&&V++,r.value.hasRefundableRoom!==null&&V++,r.value.placeId!==null&&V++,r.value.searchQuery.trim()!==""&&V++,V}),P=()=>{f.value=!f.value},C=()=>{f.value=!1},S=()=>{B(r.value.minPrice,r.value.maxPrice)},R=()=>{o(r.value.stars)},j=()=>{p(r.value.amenities)},G=V=>{const I=V.target;_(I.checked?!0:null)},te=V=>{const I=V.target;a(I.checked?!0:null)},T=()=>{k()},q=V=>{V.target.closest(".filter-dropdown")||C()};return re(()=>{document.addEventListener("click",q)}),he(()=>{document.removeEventListener("click",q)}),(V,I)=>(l(),d("div",wt,[t("button",{onClick:P,class:N(["filter-dropdown__trigger",{active:f.value}]),type:"button"},[I[4]||(I[4]=t("i",{class:"material-icons"},"tune",-1)),I[5]||(I[5]=t("span",null,"Filtros",-1)),t("i",$t,y(f.value?"expand_less":"expand_more"),1),i.value>0?(l(),d("span",Pt,y(i.value),1)):E("",!0)],2),f.value?(l(),d("div",St,[t("div",{class:"filter-dropdown__header"},[I[6]||(I[6]=t("h4",null,"Filtros Avançados",-1)),t("button",{onClick:T,class:"filter-dropdown__reset"}," Limpar ")]),t("div",Ct,[t("div",It,[I[7]||(I[7]=t("h5",{class:"filter-section__title"},"Faixa de preço",-1)),t("div",Rt,[z(Ie,{modelValue:r.value.minPrice,"onUpdate:modelValue":[I[0]||(I[0]=x=>r.value.minPrice=x),S],label:"Mínimo",placeholder:"R$ 0,00"},null,8,["modelValue"]),z(Ie,{modelValue:r.value.maxPrice,"onUpdate:modelValue":[I[1]||(I[1]=x=>r.value.maxPrice=x),S],label:"Máximo",placeholder:"R$ 10.000,00"},null,8,["modelValue"])])]),t("div",Ft,[I[8]||(I[8]=t("h5",{class:"filter-section__title"},"Classificação",-1)),t("div",Bt,[(l(),d(Q,null,U(["5","4","3","2","1"],x=>t("label",{key:x,class:"filter-section__star-option"},[pe(t("input",{type:"checkbox",value:x,"onUpdate:modelValue":I[2]||(I[2]=Y=>r.value.stars=Y),onChange:R,class:"filter-section__checkbox"},null,40,Lt),[[Ce,r.value.stars]]),t("span",Mt,[(l(!0),d(Q,null,U(parseInt(x),Y=>(l(),d("span",{key:Y,class:"filter-section__star"},"★"))),128)),parseInt(x)<5?(l(),d("span",Ht,[(l(!0),d(Q,null,U(5-parseInt(x),Y=>(l(),d("span",{key:Y,class:"filter-section__star filter-section__star--empty"},"☆"))),128))])):E("",!0)])])),64))])]),t("div",Et,[I[9]||(I[9]=t("h5",{class:"filter-section__title"},"Comodidades",-1)),t("div",At,[(l(!0),d(Q,null,U(m(b),x=>(l(),d("label",{key:x.key,class:"filter-section__amenity-option"},[pe(t("input",{type:"checkbox",value:x.key,"onUpdate:modelValue":I[3]||(I[3]=Y=>r.value.amenities=Y),onChange:j,class:"filter-section__checkbox"},null,40,Tt),[[Ce,r.value.amenities]]),t("span",Vt,y(x.label),1)]))),128))])]),t("div",xt,[I[12]||(I[12]=t("h5",{class:"filter-section__title"},"Características",-1)),t("div",Dt,[t("label",Nt,[t("input",{type:"checkbox",checked:r.value.hasBreakFast===!0,onChange:G,class:"filter-section__checkbox"},null,40,Ot),I[10]||(I[10]=t("span",{class:"filter-section__feature-label"},"Café da manhã",-1))]),t("label",Qt,[t("input",{type:"checkbox",checked:r.value.hasRefundableRoom===!0,onChange:te,class:"filter-section__checkbox"},null,40,jt),I[11]||(I[11]=t("span",{class:"filter-section__feature-label"},"Quarto reembolsável",-1))])])])])])):E("",!0)]))}}),Wt=Object.assign(Ut,{__name:"FilterDropdown"}),Zt={class:"search-header"},Kt={class:"tabs"},Gt=["onClick"],zt={key:0,class:"search-container"},Yt={class:"search-bar"},Jt={class:"search-input-wrapper"},Xt={key:0,class:"loading-spinner"},qt={key:0,class:"quick-filters"},ea={class:"filter-chips"},ta=["onClick"],aa={class:"material-icons"},sa={key:1,class:"suggestions-dropdown"},oa={key:0,class:"suggestions-section"},na={class:"suggestions-list"},la=["onClick"],ia={key:1,class:"suggestions-section"},ra={class:"suggestions-list"},ca={key:0,class:"loading-suggestions"},ua=["onClick"],da={class:"suggestion-content"},pa={class:"suggestion-name"},ma={class:"suggestion-detail"},ha={class:"suggestion-action"},_a=["onClick"],va={class:"suggestion-content"},ga={class:"suggestion-name"},fa={class:"suggestion-detail"},ya={key:3,class:"empty-suggestions"},ba={key:2,class:"suggestions-section"},ka={class:"empty-suggestions"},wa=K({__name:"HotelHeader",props:{initialTab:{default:"hotel"},initialSearch:{default:""}},emits:["tabChange","search"],setup(h,{expose:u,emit:g}){const b=h,B=g,o=ee(),p=$(""),_=$(!1),a=$(!1),k=$(-1),f=$([]),r=$([]),i=$(!1);A(()=>f.value.length>0),A(()=>r.value.length>0);const P=$(b.initialTab),C=$(!0),S=[{key:"breakfast",label:"Café da manhã",icon:"restaurant"},{key:"refundable",label:"Reembolsável",icon:"money_off"},{key:"5stars",label:"5 estrelas",icon:"star"},{key:"wifi",label:"Wi-Fi",icon:"wifi"},{key:"parking",label:"Estacionamento",icon:"local_parking"}],R=$([]);Pe(()=>o.filters,c=>{const n=[];c.hasBreakFast===!0&&n.push("breakfast"),c.hasRefundableRoom===!0&&n.push("refundable"),c.stars.includes("5")&&n.push("5stars"),c.amenities.includes("WI_FI")&&n.push("wifi"),c.amenities.includes("PARKING")&&n.push("parking"),R.value=n},{deep:!0});const j=[{name:"aereo",label:"Aéreo",icon:"material-icons"},{name:"hotel",label:"Hotel",icon:"material-icons"},{name:"carro",label:"Carro",icon:"material-icons"},{name:"onibus",label:"Ônibus",icon:"material-icons"}];A(()=>R.value.length>0);const G=c=>{P.value=c,B("tabChange",c)},te=async c=>{if(!c.trim()){r.value=[],i.value=!1;return}i.value=!0;const n=c.toLowerCase(),L=[];try{o.hotels.forEach(M=>{(M.name.toLowerCase().includes(n)||M.district.toLowerCase().includes(n))&&L.push({id:`hotel-${M.id}`,name:M.name,detail:`${M.stars} estrelas • ${o.formatPrice(M.totalPrice)} • ${M.district}`,type:"hotel",action:"search",data:M})}),o.places.forEach(M=>{if(M.name.toLowerCase().includes(n)||M.state.toLowerCase().includes(n)){const w=o.getHotelsByPlace(M.id);L.push({id:`place-${M.id}`,name:`${M.name}, ${M.state}`,detail:`${w.length} hotéis disponíveis`,type:"place",action:"filter",data:M})}}),n.length>=3&&(o.updateCitySearchQuery(n),await new Promise(M=>setTimeout(M,300)),o.formattedCityResults.forEach(M=>{L.push({id:`city-${M.placeId}`,name:M.displayName,detail:`Buscar hotéis em ${M.name}`,type:"city",action:"search",data:M})})),r.value=L.slice(0,10).sort((M,w)=>{const Z=M.name.toLowerCase().startsWith(n),le=w.name.toLowerCase().startsWith(n);if(Z&&!le)return-1;if(!Z&&le)return 1;const de={hotel:3,place:2,city:1};return de[w.type]-de[M.type]})}catch(M){console.error("Erro ao gerar sugestões:",M),r.value=[]}finally{i.value=!1}},T=()=>{p.value.trim()&&J(!0),te(p.value)},q=c=>{const n=c.trim();n&&(f.value=f.value.filter(L=>L!==n),f.value.unshift(n),f.value.length>5&&(f.value=f.value.slice(0,5)),localStorage.setItem("recentHotelSearches",JSON.stringify(f.value)))},V=()=>{f.value=[],localStorage.removeItem("recentHotelSearches")},I=()=>{const c=localStorage.getItem("recentHotelSearches");if(c)try{f.value=JSON.parse(c)}catch(n){console.error("Erro ao carregar buscas recentes:",n)}},x=async c=>{if(c.trim()){_.value=!0,q(c);try{const n=r.value.find(L=>L.type==="place"&&L.name.toLowerCase().includes(c.toLowerCase()));if(n){const L=parseInt(n.id.replace("place-",""));o.updateFilters({placeId:L,searchQuery:""})}else await o.searchHotels(c.trim())}catch(n){console.error("Erro na busca:",n)}finally{_.value=!1,a.value=!1}}},Y=()=>{p.value="",r.value=[],a.value=!1,o.resetSearchQuery()},se=async c=>{if(typeof c=="string")p.value=c,await x(c);else if(p.value=c.name,c.action==="filter"&&c.type==="place"){const n=parseInt(c.id.replace("place-",""));o.updateFilters({placeId:n,searchQuery:""}),q(c.name)}else c.type==="city"?(await o.searchHotels(c.data.name),q(c.name)):await o.searchHotels(c.name)},ve=()=>{setTimeout(()=>{a.value=!1,k.value=-1},200)},ge=c=>{if(!a.value)return;const n=p.value?[...r.value,...o.formattedCityResults]:f.value;switch(c.key){case"ArrowDown":c.preventDefault(),k.value=Math.min(k.value+1,n.length-1);break;case"ArrowUp":c.preventDefault(),k.value=Math.max(k.value-1,-1);break;case"Enter":if(c.preventDefault(),k.value>=0&&n[k.value]){const L=n[k.value];if(!L)return;typeof L=="string"?se(L):"placeId"in L?ue(L):se(L)}else x(p.value);break;case"Escape":a.value=!1,k.value=-1;break}},J=c=>{a.value=c},ue=async c=>{p.value=c.displayName,await o.searchHotels(c.name),q(c.displayName),a.value=!1},fe=c=>{const n=R.value.indexOf(c);n>-1?R.value.splice(n,1):R.value.push(c),oe()},oe=()=>{const c={...o.filters};c.hasBreakFast=null,c.hasRefundableRoom=null,c.stars=c.stars.filter(n=>n!=="5"),c.amenities=c.amenities.filter(n=>!["WI_FI","PARKING"].includes(n)),R.value.forEach(n=>{switch(n){case"breakfast":c.hasBreakFast=!0;break;case"refundable":c.hasRefundableRoom=!0;break;case"5stars":c.stars.push("5");break;case"wifi":c.amenities.push("WI_FI");break;case"parking":c.amenities.push("PARKING");break}}),o.updateFilters(c)},ye=()=>{ve()},X=c=>{ge(c)},be=c=>({aereo:"flight",hotel:"hotel",carro:"directions_car",onibus:"directions_bus"})[c]||"help",ke=c=>({hotel:"hotel",place:"location_on",city:"location_city"})[c]||"search",W=c=>({hotel:"icon-hotel",place:"icon-place",city:"icon-city"})[c]||"";return re(()=>{I(),o.hotels.length===0&&!o.loading&&o.fetchInitialData()}),u({setActiveTab:G,setSearchQuery:c=>{p.value=c}}),(c,n)=>{const L=_e,M=Wt;return l(),d("div",Zt,[t("div",Kt,[(l(),d(Q,null,U(j,(w,Z)=>t("button",{key:Z,class:N(["tab",{active:P.value===w.name}]),onClick:le=>G(w.name)},[t("i",{class:N(w.icon)},y(be(w.name)),3),me(" "+y(w.label),1)],10,Gt)),64))]),P.value==="hotel"?(l(),d("div",zt,[t("div",Yt,[t("div",Jt,[n[6]||(n[6]=t("div",{class:"input-icon"},[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),pe(t("input",{"onUpdate:modelValue":n[0]||(n[0]=w=>p.value=w),onInput:T,onFocus:n[1]||(n[1]=w=>J(!0)),onBlur:ye,onKeydown:X,type:"text",placeholder:"Buscar hotéis, destinos, cidades...",class:"search-input",autocomplete:"off"},null,544),[[it,p.value]]),_.value||m(o).citySearchLoading?(l(),d("div",Xt,n[4]||(n[4]=[t("div",{class:"spinner"},null,-1)]))):E("",!0),p.value&&!_.value?(l(),d("button",{key:1,onClick:Y,class:"clear-button",type:"button"},n[5]||(n[5]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):E("",!0)]),z(L,{text:"Buscar",icon:"search",loading:_.value,disabled:!p.value.trim(),onClick:n[2]||(n[2]=()=>x(p.value))},null,8,["loading","disabled"])]),C.value?(l(),d("div",qt,[t("div",ea,[(l(),d(Q,null,U(S,w=>t("button",{key:w.key,class:N(["filter-chip",{active:R.value.includes(w.key)}]),onClick:Z=>fe(w.key)},[t("i",aa,y(w.icon),1),me(" "+y(w.label),1)],10,ta)),64)),z(M)])])):E("",!0),a.value?(l(),d("div",sa,[f.value.length>0&&!p.value?(l(),d("div",oa,[t("div",{class:"section-header"},[n[7]||(n[7]=t("span",null,"Buscas recentes",-1)),t("button",{onClick:V,class:"clear-recent"},"Limpar")]),t("div",na,[(l(!0),d(Q,null,U(f.value,w=>(l(),d("div",{key:w,class:"suggestion-item",onClick:()=>se(w)},[n[8]||(n[8]=t("i",{class:"material-icons"},"history",-1)),t("span",null,y(w),1)],8,la))),128))])])):E("",!0),p.value?(l(),d("div",ia,[n[13]||(n[13]=t("div",{class:"section-header"},[t("span",null,"Hotéis, destinos e cidades")],-1)),t("div",ra,[i.value||m(o).citySearchLoading?(l(),d("div",ca,n[9]||(n[9]=[t("div",{class:"spinner"},null,-1),t("span",null,"Buscando sugestões...",-1)]))):E("",!0),!i.value&&!m(o).citySearchLoading&&r.value.length>0?(l(!0),d(Q,{key:1},U(r.value,(w,Z)=>(l(),d("div",{key:w.id,class:N(["suggestion-item",{selected:k.value===Z}]),onClick:()=>se(w)},[t("i",{class:N(["material-icons suggestion-icon",W(w.type)])},y(ke(w.type)),3),t("div",da,[t("span",pa,y(w.name),1),t("span",ma,y(w.detail),1)]),t("div",ha,[t("span",{class:N(["action-badge",w.action])},y(w.action==="filter"?"Filtrar":"Buscar"),3)])],10,ua))),128)):E("",!0),!i.value&&!m(o).citySearchLoading&&m(o).formattedCityResults.length>0?(l(!0),d(Q,{key:2},U(m(o).formattedCityResults,(w,Z)=>(l(),d("div",{key:`city-${w.placeId}`,class:N(["suggestion-item",{selected:k.value===r.value.length+Z}]),onClick:()=>ue(w)},[n[10]||(n[10]=t("i",{class:"material-icons suggestion-icon icon-city"},"location_city",-1)),t("div",va,[t("span",ga,y(w.displayName),1),t("span",fa,"Buscar hotéis em "+y(w.name),1)]),n[11]||(n[11]=t("div",{class:"suggestion-action"},[t("span",{class:"action-badge search"},"Buscar")],-1))],10,_a))),128)):E("",!0),!i.value&&!m(o).citySearchLoading&&r.value.length===0&&m(o).formattedCityResults.length===0?(l(),d("div",ya,[n[12]||(n[12]=t("i",{class:"material-icons"},"search_off",-1)),t("span",null,'Nenhuma sugestão encontrada para "'+y(p.value)+'"',1)])):E("",!0)])])):E("",!0),p.value&&r.value.length===0&&!_.value?(l(),d("div",ba,[t("div",ka,[n[14]||(n[14]=t("i",{class:"material-icons"},"search_off",-1)),t("span",null,'Nenhum resultado encontrado para "'+y(p.value)+'"',1),z(L,{variant:"outline",size:"small",text:"Buscar mesmo assim",onClick:n[3]||(n[3]=()=>x(p.value))})])])):E("",!0)])):E("",!0)])):E("",!0)])}}}),$a=Object.assign(wa,{__name:"HotelHeader"}),Pa={class:"loading"},Sa=K({__name:"LoadingState",props:{message:{default:"Carregando..."}},setup(h){return(u,g)=>(l(),d("div",Pa,[g[0]||(g[0]=t("div",{class:"loading__spinner"},null,-1)),t("p",null,y(u.message),1)]))}}),Ca=Object.assign(Sa,{__name:"LoadingState"}),Ia={class:"hotel-carousel"},Ra={class:"hotel-carousel__container"},Fa=["src","alt"],Ba={key:0,class:"hotel-carousel__stars-badge"},La={key:0,class:"material-icons"},Ma={key:1,class:"material-icons"},Ha={key:1,class:"hotel-carousel__image-nav"},Ea=["disabled"],Aa=["disabled"],Ta=K({__name:"HotelCarousel",props:{images:{},alt:{default:"Imagem do hotel"},stars:{},height:{default:"280px"}},emits:["image-change"],setup(h,{expose:u,emit:g}){const b=h,B=g,o=$(0),p=A(()=>b.images.length===0?"":b.images[o.value]||b.images[0]||""),_=()=>{o.value<b.images.length-1&&(o.value++,B("image-change",o.value))},a=()=>{o.value>0&&(o.value--,B("image-change",o.value))},k=f=>{switch(f.key){case"ArrowLeft":f.preventDefault(),a();break;case"ArrowRight":f.preventDefault(),_();break}};return Pe(()=>b.images,()=>{o.value=0},{immediate:!0}),re(()=>{document.addEventListener("keydown",k)}),he(()=>{document.removeEventListener("keydown",k)}),u({nextImage:_,previousImage:a,currentImageIndex:D(o)}),(f,r)=>(l(),d("div",Ia,[t("div",Ra,[t("img",{src:m(p),alt:f.alt,class:"hotel-carousel__image"},null,8,Fa),f.stars?(l(),d("div",Ba,[(l(),d(Q,null,U(5,i=>t("span",{key:i,class:"hotel-carousel__star"},[i<=parseInt(f.stars)?(l(),d("i",La,"star")):(l(),d("i",Ma,"star_border"))])),64))])):E("",!0),f.images.length>1?(l(),d("div",Ha,[t("button",{class:"hotel-carousel__nav-btn hotel-carousel__nav-btn--prev",onClick:a,disabled:m(o)===0},r[0]||(r[0]=[t("i",{class:"material-icons"},"chevron_left",-1)]),8,Ea),t("button",{class:"hotel-carousel__nav-btn hotel-carousel__nav-btn--next",onClick:_,disabled:m(o)===f.images.length-1},r[1]||(r[1]=[t("i",{class:"material-icons"},"chevron_right",-1)]),8,Aa)])):E("",!0)])]))}}),Re=Object.assign(Ta,{__name:"HotelCarousel"}),Va={class:"hotel-card__image-section"},xa={class:"hotel-card__details-section"},Da={class:"hotel-card__name"},Na={class:"hotel-card__location"},Oa={class:"hotel-card__features"},Qa={key:0,class:"hotel-card__feature"},ja={key:1,class:"hotel-card__feature"},Ua={class:"hotel-card__pricing-section"},Wa={class:"hotel-card__main-price"},Za={class:"hotel-card__no-booking-price"},Ka={class:"hotel-card__price-breakdown"},Ga={class:"hotel-card__breakdown-row"},za={class:"hotel-card__breakdown-value"},Ya={class:"hotel-card__breakdown-row"},Ja={class:"hotel-card__breakdown-value"},Xa={class:"hotel-card__breakdown-row hotel-card__breakdown-row--total"},qa={class:"hotel-card__breakdown-value"},es=K({__name:"HotelCard",props:{hotel:{},viewMode:{default:"grid"}},setup(h){const u=h,g=ee(),{openHotelDrawer:b,getAmenityLabel:B,getPlaceName:o,formatPrice:p}=g;$(!0);const _=$(!1),a=$(!1),k=A(()=>u.hotel.images&&Array.isArray(u.hotel.images)&&u.hotel.images.length>0?u.hotel.images:u.hotel.thumb?[u.hotel.thumb]:["https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800"]),f=async()=>{if(!_.value){_.value=!0;try{await new Promise(i=>setTimeout(i,300)),await b(u.hotel),a.value=!0,setTimeout(()=>{a.value=!1},2e3)}catch(i){console.error("Erro ao abrir detalhes do hotel:",i)}finally{_.value=!1}}},r=i=>{console.log("Imagem mudou para:",i)};return(i,P)=>{const C=_e;return l(),d("div",{class:N(["hotel-card",`hotel-card--${i.viewMode}`])},[t("div",Va,[z(Re,{images:m(k),alt:i.hotel.name,stars:i.hotel.stars,onImageChange:r},null,8,["images","alt","stars"])]),t("div",xa,[t("h3",Da,y(i.hotel.name),1),t("p",Na,y(i.hotel.district),1),P[2]||(P[2]=rt('<div class="hotel-card__amenities"><div class="hotel-card__amenity-icon" title="Restaurante"><i class="material-icons">restaurant</i></div><div class="hotel-card__amenity-icon" title="Ar Condicionado"><i class="material-icons">ac_unit</i></div><div class="hotel-card__amenity-icon" title="Wi-Fi"><i class="material-icons">wifi</i></div><div class="hotel-card__amenity-icon" title="Piscina"><i class="material-icons">pool</i></div><div class="hotel-card__amenity-icon" title="Acessibilidade"><i class="material-icons">accessible</i></div><div class="hotel-card__amenity-icon" title="Bar"><i class="material-icons">local_bar</i></div></div>',1)),t("div",Oa,[i.hotel.hasRefundableRoom?(l(),d("span",Qa,P[0]||(P[0]=[t("i",{class:"material-icons"},"attach_money",-1),me(" Reembolsável ",-1)]))):E("",!0),i.hotel.hasBreakFast?(l(),d("span",ja,P[1]||(P[1]=[t("i",{class:"material-icons"},"local_cafe",-1),me(" Café da manhã ",-1)]))):E("",!0)])]),t("div",Ua,[P[6]||(P[6]=t("div",{class:"hotel-card__price-label"},"Por dia",-1)),t("div",Wa,y(m(p)(Math.floor(i.hotel.totalPrice/2))),1),t("div",Za,"No booking "+y(m(p)(Math.floor(i.hotel.totalPrice/2)+1500)),1),t("div",Ka,[t("div",Ga,[P[3]||(P[3]=t("span",{class:"hotel-card__breakdown-label"},"Diárias",-1)),t("span",za,"2x "+y(m(p)(Math.floor(i.hotel.totalPrice/2))),1)]),t("div",Ya,[P[4]||(P[4]=t("span",{class:"hotel-card__breakdown-label"},"Taxas",-1)),t("span",Ja,"2x "+y(m(p)(8e3)),1)]),t("div",Xa,[P[5]||(P[5]=t("span",{class:"hotel-card__breakdown-label"},"Total",-1)),t("span",qa,y(m(p)(i.hotel.totalPrice)),1)])]),z(C,{class:"hotel-card__details-button",text:"Ver detalhes",loading:m(_),onClick:f},null,8,["loading"])])],2)}}}),ts=Object.assign(es,{__name:"HotelCard"}),as={class:"empty-state"},ss={class:"empty-state__icon"},os={class:"material-icons"},ns={class:"empty-state__title"},ls={class:"empty-state__message"},is=K({__name:"EmptyState",props:{icon:{default:"search_off"},title:{},message:{},actionText:{}},emits:["action"],setup(h){return(u,g)=>{const b=_e;return l(),d("div",as,[t("div",ss,[t("i",os,y(u.icon),1)]),t("h3",ns,y(u.title),1),t("p",ls,y(u.message),1),u.actionText?(l(),ne(b,{key:0,text:u.actionText,onClick:g[0]||(g[0]=B=>u.$emit("action"))},null,8,["text"])):E("",!0)])}}}),rs=Object.assign(is,{__name:"EmptyState"}),cs={pagination:{availableLimits:[10,20,50,100]}},us={class:"items-per-page"},ds={class:"items-per-page__select"},ps=["value"],ms=["value"],hs=K({__name:"ItemsPerPageSelector",props:{currentLimit:{}},setup(h){const u=h,g=ee(),{updateItemsPerPage:b}=g,B=A(()=>cs.pagination.availableLimits),o=async p=>{const _=p.target,a=parseInt(_.value);a!==u.currentLimit&&await b(a)};return(p,_)=>(l(),d("div",us,[_[0]||(_[0]=t("div",{class:"items-per-page__label"},[t("span",null,"Mostrar")],-1)),t("div",ds,[t("select",{value:p.currentLimit,onChange:o,class:"items-per-page__dropdown"},[(l(!0),d(Q,null,U(m(B),a=>(l(),d("option",{key:a,value:a},y(a)+" hotéis ",9,ms))),128))],40,ps)]),_[1]||(_[1]=t("div",{class:"items-per-page__info"},[t("span",null,"por página")],-1))]))}}),_s=Object.assign(ce(hs,[["__scopeId","data-v-78e23a54"]]),{__name:"ItemsPerPageSelector"}),vs={key:0,class:"pagination"},gs={class:"pagination__header"},fs={class:"pagination__info"},ys={class:"pagination__text"},bs={class:"pagination__controls"},ks=["disabled"],ws={class:"pagination__pages"},$s={key:1,class:"pagination__separator"},Ps=["onClick"],Ss={key:2,class:"pagination__separator"},Cs=["disabled"],Is=5,Rs=K({__name:"Pagination",props:{pagination:{}},setup(h){const u=h,g=ee(),{goToPage:b}=g,B=A(()=>u.pagination.offset+1),o=A(()=>Math.min(u.pagination.offset+u.pagination.limit,u.pagination.total)),p=A(()=>u.pagination.currentPage>3),_=A(()=>u.pagination.currentPage<u.pagination.totalPages-2),a=A(()=>u.pagination.currentPage>4),k=A(()=>u.pagination.currentPage<u.pagination.totalPages-3),f=A(()=>{const r=[],i=u.pagination.totalPages,P=u.pagination.currentPage;if(i<=Is)for(let C=1;C<=i;C++)r.push(C);else{let C=Math.max(1,P-2),S=Math.min(i,P+2);P<=3?S=Math.min(i,5):P>=i-2&&(C=Math.max(1,i-4));for(let R=C;R<=S;R++)r.push(R)}return r});return(r,i)=>{const P=_s;return r.pagination.totalPages>1?(l(),d("div",vs,[t("div",gs,[t("div",fs,[t("span",ys," Mostrando "+y(m(B))+"-"+y(m(o))+" de "+y(r.pagination.total)+" hotéis ",1)]),z(P,{"current-limit":r.pagination.limit},null,8,["current-limit"])]),t("div",bs,[t("button",{disabled:r.pagination.currentPage===1,onClick:i[0]||(i[0]=C=>m(b)(r.pagination.currentPage-1)),class:"pagination__btn pagination__btn--prev",title:"Página anterior"},i[4]||(i[4]=[t("i",{class:"material-icons"},"chevron_left",-1)]),8,ks),t("div",ws,[m(p)?(l(),d("button",{key:0,onClick:i[1]||(i[1]=C=>m(b)(1)),class:N(["pagination__page",{active:r.pagination.currentPage===1}])}," 1 ",2)):E("",!0),m(a)?(l(),d("span",$s,"...")):E("",!0),(l(!0),d(Q,null,U(m(f),C=>(l(),d("button",{key:C,onClick:S=>m(b)(C),class:N(["pagination__page",{active:r.pagination.currentPage===C}])},y(C),11,Ps))),128)),m(k)?(l(),d("span",Ss,"...")):E("",!0),m(_)?(l(),d("button",{key:3,onClick:i[2]||(i[2]=C=>m(b)(r.pagination.totalPages)),class:N(["pagination__page",{active:r.pagination.currentPage===r.pagination.totalPages}])},y(r.pagination.totalPages),3)):E("",!0)]),t("button",{disabled:r.pagination.currentPage===r.pagination.totalPages,onClick:i[3]||(i[3]=C=>m(b)(r.pagination.currentPage+1)),class:"pagination__btn pagination__btn--next",title:"Próxima página"},i[5]||(i[5]=[t("i",{class:"material-icons"},"chevron_right",-1)]),8,Cs)])])):E("",!0)}}}),Fs=Object.assign(ce(Rs,[["__scopeId","data-v-e89eb586"]]),{__name:"Pagination"}),Bs={key:0,class:"load-more"},Ls={class:"load-more__info"},Ms={class:"load-more__text"},Hs=K({__name:"LoadMoreButton",props:{pagination:{},isLoading:{type:Boolean,default:!1}},setup(h){const u=h,g=ee(),{loadMoreHotels:b}=g,B=A(()=>Math.min(u.pagination.offset+u.pagination.limit,u.pagination.total)),o=async()=>{await b()};return(p,_)=>{const a=_e;return p.pagination.hasMore?(l(),d("div",Bs,[z(a,{variant:"outline",text:"Carregar mais hotéis",icon:"expand_more",loading:p.isLoading,disabled:p.isLoading,onClick:o},null,8,["loading","disabled"]),t("div",Ls,[t("span",Ms," Mostrando "+y(m(B))+" de "+y(p.pagination.total)+" hotéis ",1)])])):E("",!0)}}}),Es=Object.assign(ce(Hs,[["__scopeId","data-v-6092fddc"]]),{__name:"LoadMoreButton"}),As={key:0,class:"hotel-drawer__content"},Ts={class:"hotel-drawer__header"},Vs={class:"hotel-drawer__title"},xs={class:"hotel-drawer__image-section"},Ds={class:"hotel-drawer__section"},Ns={class:"hotel-drawer__amenities-list"},Os={class:"hotel-drawer__amenity-label"},Qs={class:"hotel-drawer__section"},js={class:"hotel-drawer__address"},Us={class:"hotel-drawer__section"},Ws={class:"hotel-drawer__section-title"},Zs={class:"hotel-drawer__description"},Ks={key:1,class:"hotel-drawer__loading"},Gs=K({__name:"HotelDrawer",props:{modelValue:{type:Boolean},hotel:{}},emits:["update:modelValue"],setup(h,{emit:u}){const g=h,b=u,B=ee(),{getAmenityLabel:o,getPlaceName:p,closeHotelDrawer:_}=B,a=A({get:()=>g.modelValue,set:S=>b("update:modelValue",S)}),k=A(()=>g.hotel?g.hotel.images&&Array.isArray(g.hotel.images)&&g.hotel.images.length>0?g.hotel.images:g.hotel.thumb?[g.hotel.thumb]:["https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800"]:[]),f=()=>{_()},r=S=>{console.log("Imagem mudou para:",S)},i=S=>({WI_FI:"wifi",PARKING:"local_parking",POOL:"pool",RESTAURANT:"restaurant",FITNESS_CENTER:"fitness_center",ROOM_SERVICE:"room_service",STEAM_ROOM:"hot_tub",PET_FRIENDLY:"pets",BAR:"local_bar",SPA:"spa",ACCESSIBILITY:"accessible",AIR_CONDITIONING:"ac_unit"})[S]||"check",P=S=>{const R=B.places.find(j=>j.id===S.placeId);return R?`${S.district}, ${R.name}, ${R.state}`:S.district},C=S=>{if(a.value)switch(S.key){case"Escape":S.preventDefault(),f();break}};return re(()=>{document.addEventListener("keydown",C)}),he(()=>{document.removeEventListener("keydown",C)}),(S,R)=>(l(),d(Q,null,[m(a)?(l(),d("div",{key:0,class:"hotel-drawer-overlay",onClick:f})):E("",!0),t("div",{class:N(["hotel-drawer",{"hotel-drawer--open":m(a)}])},[S.hotel?(l(),d("div",As,[t("div",Ts,[t("h2",Vs,y(S.hotel.name),1),t("button",{onClick:f,class:"hotel-drawer__close","aria-label":"Fechar detalhes"},R[0]||(R[0]=[t("i",{class:"material-icons"},"close",-1)]))]),t("div",xs,[z(Re,{images:m(k),alt:S.hotel.name,stars:S.hotel.stars,onImageChange:r},null,8,["images","alt","stars"])]),t("div",Ds,[R[1]||(R[1]=t("h3",{class:"hotel-drawer__section-title"},"Comodidades",-1)),t("div",Ns,[(l(!0),d(Q,null,U(S.hotel.amenities,j=>(l(),d("div",{key:j,class:"hotel-drawer__amenity-item"},[t("i",{class:N([`material-icons ${i(j)}`,"hotel-drawer__amenity-icon"])},null,2),t("span",Os,y(m(o)(j)),1)]))),128))])]),t("div",Qs,[R[2]||(R[2]=t("h3",{class:"hotel-drawer__section-title"},"Localização",-1)),t("p",js,y(P(S.hotel)),1)]),t("div",Us,[t("h3",Ws,"Sobre o "+y(S.hotel.name),1),t("p",Zs,y(S.hotel.description),1)])])):(l(),d("div",Ks,R[3]||(R[3]=[t("div",{class:"hotel-drawer__spinner"},null,-1),t("p",null,"Carregando detalhes...",-1)])))],2)],64))}}),zs=Object.assign(Gs,{__name:"HotelDrawer"}),Ys=()=>{const h=ee(),u=$("price-asc"),g=[{value:"price-asc",label:"Menor preço"},{value:"price-desc",label:"Maior preço"},{value:"stars-desc",label:"Melhor classificação"},{value:"name-asc",label:"Nome A-Z"}],b=()=>{const _={"price-asc":{key:"totalPrice",label:"Preço",direction:"asc"},"price-desc":{key:"totalPrice",label:"Preço",direction:"desc"},"stars-desc":{key:"stars",label:"Classificação",direction:"desc"},"name-asc":{key:"name",label:"Nome",direction:"asc"}};h.updateSort(_[u.value])},B=_=>{console.log("Tab changed to:",_)},o=_=>{h.updateFilters({searchQuery:_})},p=A(()=>({loading:h.loading,error:h.error,hasHotels:h.hotels.length>0}));return{store:h,sortKey:u,sortOptions:g,handleSortChange:b,handleTabChange:B,handleSearch:o,pageState:p}},Js={class:"hotels-page"},Xs={class:"container"},qs={key:1,class:"error"},eo={key:2,class:"hotels-page__content"},to={class:"hotels-section"},ao={class:"sorting-controls"},so={class:"minimal-controls"},oo={class:"controls-group"},no=["value"],lo={class:"view-toggle"},io={class:"hotels-card"},ro={class:"hotels-card__content"},po=K({__name:"index",setup(h){const{store:u,sortKey:g,sortOptions:b,handleSortChange:B,handleTabChange:o,handleSearch:p,pageState:_}=Ys(),a=$("grid"),k=$(!1),f=()=>{k.value=window.innerWidth<=768};return re(()=>{console.log("🚀 Componente montado, iniciando carregamento..."),f(),window.addEventListener("resize",f),u.fetchInitialData()}),he(()=>{window.removeEventListener("resize",f)}),(r,i)=>{const P=$a,C=Ca,S=ts,R=rs,j=Fs,G=Es,te=zs;return l(),d("div",Js,[t("div",Xs,[z(P,{onTabChange:m(o),onSearch:m(p)},null,8,["onTabChange","onSearch"]),m(_).loading?(l(),ne(C,{key:0,message:"Carregando hotéis..."})):m(_).error?(l(),d("div",qs,[t("p",null,y(m(_).error),1),t("button",{class:"btn btn--primary",onClick:i[0]||(i[0]=(...T)=>m(u).fetchInitialData&&m(u).fetchInitialData(...T))},"Tentar novamente")])):(l(),d("div",eo,[t("section",to,[t("div",ao,[t("div",so,[t("div",oo,[pe(t("select",{"onUpdate:modelValue":i[1]||(i[1]=T=>ut(g)?g.value=T:null),onChange:i[2]||(i[2]=(...T)=>m(B)&&m(B)(...T)),class:"sort-select"},[(l(!0),d(Q,null,U(m(b),T=>(l(),d("option",{key:T.value,value:T.value},y(T.label),9,no))),128))],544),[[ct,m(g)]]),t("div",lo,[t("button",{class:N(["toggle-btn",{active:a.value==="grid"}]),onClick:i[3]||(i[3]=T=>a.value="grid"),title:"Grade"},i[6]||(i[6]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M3 3H10V10H3V3ZM3 14H10V21H3V14ZM14 3H21V10H14V3ZM14 14H21V21H14V14Z",fill:"currentColor"})],-1)]),2),t("button",{class:N(["toggle-btn",{active:a.value==="list"}]),onClick:i[4]||(i[4]=T=>a.value="list"),title:"Lista"},i[7]||(i[7]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M3 13H5V11H3V13ZM3 17H5V15H3V17ZM3 9H5V7H3V9ZM7 13H21V11H7V13ZM7 17H21V15H7V17ZM7 7V9H21V7H7Z",fill:"currentColor"})],-1)]),2)])])])]),t("div",io,[t("div",ro,[m(_).hasHotels?(l(),d("div",{key:0,class:N(["hotels-container",`hotels-${a.value}`])},[(l(!0),d(Q,null,U(m(u).hotels,T=>(l(),ne(S,{key:T.id,hotel:T,"view-mode":a.value},null,8,["hotel","view-mode"]))),128))],2)):(l(),ne(R,{key:1,title:"Nenhum hotel encontrado",message:"Tente ajustar os filtros para encontrar mais opções","action-text":"Limpar filtros",onAction:m(u).resetFilters},null,8,["onAction"])),m(u).pagination.total>0&&!k.value?(l(),ne(j,{key:2,pagination:m(u).pagination,class:"pagination-desktop"},null,8,["pagination"])):E("",!0),m(u).pagination.total>0&&m(u).pagination.hasMore&&k.value&&m(u).pagination.total>m(u).pagination.limit?(l(),ne(G,{key:3,pagination:m(u).pagination,"is-loading":m(u).isLoadingMore,class:"load-more-mobile"},null,8,["pagination","is-loading"])):E("",!0)])])])]))]),z(te,{modelValue:m(u).isDrawerOpen,"onUpdate:modelValue":i[5]||(i[5]=T=>m(u).isDrawerOpen=T),hotel:m(u).selectedHotel},null,8,["modelValue","hotel"])])}}});export{po as default};
